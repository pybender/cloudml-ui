
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
  
    <title>Developer’s guide &mdash; oDesk CloudML 0.0.1 documentation</title>
  <!-- htmltitle is before nature.css - we use this hack to load bootstrap first -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="_static/css/bootstrap.min.css" media="screen" />
  <link rel="stylesheet" href="_static/css/bootstrap-responsive.css"/>

    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/gallery.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="oDesk CloudML 0.0.1 documentation" href="index.html" />
    <link rel="next" title="Settings" href="settings.html" />
    <link rel="prev" title="Deployment" href="deployment.html" />
  
   
       <script type="text/javascript" src="_static/sidebar.js"></script>
   
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="_static/js/bootstrap.min.js" type="text/javascript"></script>
  <link rel="canonical" href="http://scikit-learn.org/stable/developers_guide.html" />

  <script type="text/javascript">
    $("div.buttonNext, div.buttonPrevious").hover(
       function () {
           $(this).css('background-color', '#FF9C34');
       },
       function () {
           $(this).css('background-color', '#A7D6E2');
       }
    );
    var bodywrapper = $('.bodywrapper');
    var sidebarbutton = $('#sidebarbutton');
    sidebarbutton.css({'height': '900px'});
  </script>

  </head>
  <body>

<div class="header-wrapper">
    <div class="header"></div>
</div>




<div class="content-wrapper">
    <div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
        <div class="rel rellarge">
    

  <!-- rellinks[1:] is an ugly hack to avoid link to module
  index -->
        <div class="rellink">
        <a href="deployment.html"
        accesskey="P">Previous
        <br/>
        <span class="smallrellink">
        Deployment
        </span>
            <span class="hiddenrellink">
            Deployment
            </span>
        </a>
        </div>
            <div class="spacer">
            &nbsp;
            </div>
        <div class="rellink">
        <a href="settings.html"
        accesskey="N">Next
        <br/>
        <span class="smallrellink">
        Settings
        </span>
            <span class="hiddenrellink">
            Settings
            </span>
        </a>
        </div>

    <!-- Ad a link to the 'up' page -->
    </div>
    

<!--
      <p class="doc-version">This documentation is for oDesk CloudML <strong>version 0.0.1</strong> &mdash; <a href="http://scikit-learn.org/stable/support.html#documentation-resources">Other versions</a></p> -->
<!--     <p class="citing">If you use the software, please consider <a href="about.html#citing-scikit-learn">citing scikit-learn</a>.</p> -->
    <ul>
<li><a class="reference internal" href="#">Developer&#8217;s guide</a><ul>
<li><a class="reference internal" href="#ubuntu-bootstrap">Ubuntu bootstrap</a><ul>
<li><a class="reference internal" href="#backend">Backend</a></li>
<li><a class="reference internal" href="#frontend">Frontend</a><ul>
<li><a class="reference internal" href="#installation-strategy">Installation Strategy</a></li>
<li><a class="reference internal" href="#global-modules-installation">Global Modules Installation</a></li>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#building-3rd-party">Building 3rd party</a><ul>
<li><a class="reference internal" href="#building-x-editable">Building x-editable</a></li>
</ul>
</li>
<li><a class="reference internal" href="#updating-webdrive">Updating Webdrive</a><ul>
<li><a class="reference internal" href="#grunt-key-tasks-and-testing-your-installation">Grunt Key Tasks and Testing your installation</a><ul>
<li><a class="reference internal" href="#unit-tests-grunt-unit">Unit Tests (grunt unit)</a></li>
<li><a class="reference internal" href="#e2e-with-protractor-grunt-e2e">E2E with Protractor (grunt e2e)</a></li>
<li><a class="reference internal" href="#running-the-app-during-development-grunt-server">Running the app during development (grunt server)</a></li>
<li><a class="reference internal" href="#building-public">Building _public</a></li>
<li><a class="reference internal" href="#coverage">Coverage</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#the-role-of-vendor-config-coffee">The role of vendor.config.coffee</a><ul>
<li><a class="reference internal" href="#cdn-section">CDN Section</a></li>
<li><a class="reference internal" href="#bundled-section">Bundled Section</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#macos-bootstrap">MacOS bootstrap</a><ul>
<li><a class="reference internal" href="#id2">Installation strategy</a></li>
<li><a class="reference internal" href="#id3">Backend</a><ul>
<li><a class="reference internal" href="#front-end-installation-for-cloudml-ui">Front-end installation for Cloudml-ui</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#vagrant">Vagrant</a></li>
<li><a class="reference internal" href="#installing-test-data">Installing test data</a></li>
</ul>
</li>
</ul>

    </div>
</div>



      <div class="content">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="developer-s-guide">
<h1>Developer&#8217;s guide<a class="headerlink" href="#developer-s-guide" title="Permalink to this headline">¶</a></h1>
<div class="section" id="ubuntu-bootstrap">
<h2>Ubuntu bootstrap<a class="headerlink" href="#ubuntu-bootstrap" title="Permalink to this headline">¶</a></h2>
<div class="section" id="backend">
<h3>Backend<a class="headerlink" href="#backend" title="Permalink to this headline">¶</a></h3>
<p>Install system requirement:</p>
<div class="highlight-python"><pre>$ sudo apt-get install liblapack-dev gfortran libpq-dev libevent-dev python-dev rabbitmq-server</pre>
</div>
<p>Create virtual env:</p>
<div class="highlight-python"><pre>$ virtualenv --no-site-packages ve
$ . ve/bin/activate</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It would be better, if you have pip version 1.1.</p>
</div>
<p>Install numpy and scipy:</p>
<div class="highlight-python"><pre>$ export LAPACK=/usr/lib/liblapack.so
$ export ATLAS=/usr/lib/libatlas.so
$ export BLAS=/usr/lib/libblas.so
$ pip install numpy==1.7.1
$ pip install scipy==0.12.0</pre>
</div>
<p>Install python requirements:</p>
<div class="highlight-python"><pre>$ pip install -r ./requirements.txt</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>To use your local version of cloudml, instead of the one coming from requirements.txt of cloudml-ui project:</p>
<ul class="last simple">
<li>pip uninstall cloudml</li>
<li>let PYTHONPATH point to your cloudml root directory</li>
</ul>
</div>
<p>Install Postgresql using instruction <a class="reference external" href="https://help.ubuntu.com/community/PostgreSQL">https://help.ubuntu.com/community/PostgreSQL</a></p>
<p>Create user and database:</p>
<div class="highlight-python"><pre>$ sudo -u postgres createuser -D -A -P cloudml
$ sudo -u postgres createdb -O cloudml cloudml</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Need set password to &#8216;cloudml&#8217; for default setting.</p>
</div>
<p>Create local config:</p>
<div class="highlight-python"><pre>$ cp api/local_config.py.tpl api/local_config.py</pre>
</div>
<p>Create OATH API keys using <a class="reference external" href="https://www.upwork.com/services/api/apply">https://www.upwork.com/services/api/apply</a>. Callback URL is <a class="reference external" href="http://127.0.0.1:3333/#/auth/callback">http://127.0.0.1:3333/#/auth/callback</a> and fill local_config.py:</p>
<div class="highlight-python"><pre>$ ODESK_OAUTH_KEY = '{{ odesk api key }}'
$ ODESK_OAUTH_SECRET = '{{ odesk secret key }}'</pre>
</div>
<p>Configure rabbitmq(celery broker):</p>
<div class="highlight-python"><pre>$ rabbitmqctl add_user cloudml cloudml
$ rabbitmqctl add_vhost cloudml
$ rabbitmqctl set_permissions cloudml cloudml "*" "*" "*
"</pre>
</div>
<p>To install nltk/punkt you need to hid to <a class="reference external" href="http://www.nltk.org/data.html">http://www.nltk.org/data.html</a> and follow
the direction. After nltk.download() choose to download punkt.</p>
<p>Install local dynamodb from <a class="reference external" href="http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Tools.DynamoDBLocal.html">http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Tools.DynamoDBLocal.html</a></p>
<p>Run local dynamodb:</p>
<div class="highlight-python"><pre>$ ./api/logs/dynamodb/dynamodb_local.sh</pre>
</div>
<p>Create dynoamodb tables:</p>
<div class="highlight-python"><pre>$ python manage.py create_dynamodb_tables</pre>
</div>
<p>Create postgresql tables:</p>
<div class="highlight-python"><pre>$ python manage.py create_db_tables</pre>
</div>
<p>Run dev server:</p>
<div class="highlight-python"><pre>$ python manage.py runserver --threaded</pre>
</div>
<p id="celery">Run celery:</p>
<div class="highlight-python"><pre>$ python manage.py celeryd</pre>
</div>
<p>Run flower (celery monitor):</p>
<div class="highlight-python"><pre>$ python manage.py flower</pre>
</div>
<p>Run shell:</p>
<div class="highlight-python"><pre>$ python manage.py shell</pre>
</div>
<p>Run tests:</p>
<div class="highlight-python"><pre>$ python manage.py test</pre>
</div>
<p>Check unittests coverage:</p>
<div class="highlight-python"><pre>$ nosetests --with-coverage --cover-package=api.accounts --verbose --tests api.accounts.tests --cover-html-dir=coverage --cover-html</pre>
</div>
</div>
<div class="section" id="frontend">
<h3>Frontend<a class="headerlink" href="#frontend" title="Permalink to this headline">¶</a></h3>
<div class="section" id="installation-strategy">
<h4>Installation Strategy<a class="headerlink" href="#installation-strategy" title="Permalink to this headline">¶</a></h4>
<p>We are trying to maintain a minimal number of global node modules. In a
perfect configuration you should only have the following modules in
<tt class="docutils literal"><span class="pre">/usr/local/lib/node_modules</span></tt></p>
<ul class="simple">
<li>bower</li>
<li>coffee-script</li>
<li>grunt-cli</li>
<li>npm</li>
</ul>
</div>
<div class="section" id="global-modules-installation">
<h4>Global Modules Installation<a class="headerlink" href="#global-modules-installation" title="Permalink to this headline">¶</a></h4>
<p>This is on as-needed-basis, if you are missing a global dependency
listed in the <a class="reference external" href="#installation-strategy">Installation Strategy</a> do the
following, you will usually need <tt class="docutils literal"><span class="pre">sudo</span></tt>:</p>
<div class="highlight-python"><pre>$ sudo npm install -g bower@1.3.9
$ sudo npm install -g coffee-script@1.8.0
$ sudo npm install -g grunt-cli@0.1.13</pre>
</div>
</div>
<div class="section" id="installation">
<h4>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h4>
<p>Change directory to your local cloudml-ui/ui directory and do the
following:</p>
<div class="highlight-python"><pre>$ rm -r node_modules bower_components
$ npm cache clean
$ npm install
$ bower cache clean
$ bower install</pre>
</div>
</div>
<div class="section" id="building-3rd-party">
<h4>Building 3rd party<a class="headerlink" href="#building-3rd-party" title="Permalink to this headline">¶</a></h4>
<p>Not all third party requires building, only few and declining.</p>
<div class="section" id="building-x-editable">
<h5>Building x-editable<a class="headerlink" href="#building-x-editable" title="Permalink to this headline">¶</a></h5>
<p>version 1.4.4 of x-editable doesn&#8217;t yet come with pre-build
redistributable so you have to build it yourself.</p>
<p>Change directory to your local cloudml-ui/ui directory and do the
following:</p>
<blockquote>
<div>$ cd bower_components/x-editable
$ npm install
$ grunt build</div></blockquote>
<p>Now you have <tt class="docutils literal"><span class="pre">bower_components/x-editable/dist</span></tt> directory to serve
x-editable locally, note that x-editable on production is served through
CDN.</p>
</div>
</div>
<div class="section" id="updating-webdrive">
<h4>Updating Webdrive<a class="headerlink" href="#updating-webdrive" title="Permalink to this headline">¶</a></h4>
<p>Change directory to your local cloudml-ui/ui directory</p>
<p>Update webdrive to install chrome driver and selenium standalone server</p>
<blockquote>
<div>$ ./node_modules/protractor/bin/webdriver-manager update</div></blockquote>
<p>in case webdrive updates fails for any reason, do the follwoing are
retry the update</p>
<blockquote>
<div>$ rm -r ./node_modules/protractor/selenium</div></blockquote>
<div class="section" id="grunt-key-tasks-and-testing-your-installation">
<h5>Grunt Key Tasks and Testing your installation<a class="headerlink" href="#grunt-key-tasks-and-testing-your-installation" title="Permalink to this headline">¶</a></h5>
<p>Change directory to your local cloudml-ui/ui directory</p>
<blockquote>
<div>$ grunt &#8211;help</div></blockquote>
<p>This will display grunt available tasks, generally use this when needed.</p>
<div class="section" id="unit-tests-grunt-unit">
<h6>Unit Tests (grunt unit)<a class="headerlink" href="#unit-tests-grunt-unit" title="Permalink to this headline">¶</a></h6>
<blockquote>
<div>$ grunt unit</div></blockquote>
<p>This should launch a browser/chrome and run the unit tests. It <em>should</em>
all pass :), when done do <tt class="docutils literal"><span class="pre">CTRL+C</span></tt></p>
</div>
<div class="section" id="e2e-with-protractor-grunt-e2e">
<h6>E2E with Protractor (grunt e2e)<a class="headerlink" href="#e2e-with-protractor-grunt-e2e" title="Permalink to this headline">¶</a></h6>
<p><strong>Make sure you are running your local backend</strong></p>
<p>Launch local frontend server:</p>
<div class="highlight-python"><pre>$ grunt server</pre>
</div>
<p>Launch E2E tests:</p>
<div class="highlight-python"><pre>$ grunt e2e</pre>
</div>
<p>This should launch a browser/chrome and run the E2E tests. It <em>should</em>
all pass :)</p>
</div>
<div class="section" id="running-the-app-during-development-grunt-server">
<h6>Running the app during development (grunt server)<a class="headerlink" href="#running-the-app-during-development-grunt-server" title="Permalink to this headline">¶</a></h6>
<blockquote>
<div>$ grunt server</div></blockquote>
<p>This will run the application and monitors key files for live reload.</p>
<p>You can also do:</p>
<div class="highlight-python"><pre>$ grunt server:usecdn</pre>
</div>
<p>If you want to run against CDN version of 3rd parties. By default
<tt class="docutils literal"><span class="pre">grunt</span> <span class="pre">server</span></tt> will run against local 3rd parties files for speed
(look at ./vendor.config.coffee for more details on this)</p>
</div>
<div class="section" id="building-public">
<h6>Building _public<a class="headerlink" href="#building-public" title="Permalink to this headline">¶</a></h6>
<blockquote>
<div>$ grunt build</div></blockquote>
<p>This will build the distributable files. It will include
./app/scripts/prod_config.coffee by default. You can use staging by
grunt build:staging, further more you can try out the built files
locally by using grunt build:local and launch a simple server against
_public like:</p>
<div class="highlight-python"><pre>$ cd _public
$ python -m SimpleHTTPServer 8080</pre>
</div>
</div>
<div class="section" id="coverage">
<h6>Coverage<a class="headerlink" href="#coverage" title="Permalink to this headline">¶</a></h6>
<blockquote>
<div>$ grunt coverage</div></blockquote>
<p>Then open ./coverage/xyz/index.html in browser</p>
</div>
</div>
</div>
<div class="section" id="the-role-of-vendor-config-coffee">
<h4>The role of vendor.config.coffee<a class="headerlink" href="#the-role-of-vendor-config-coffee" title="Permalink to this headline">¶</a></h4>
<p>The file vendor.config.coffee is centralized place to reference
vendor/3rd party bower libraries. Currently it works with JS files only.
Vendor/3rd party CSS files are still added manually in
app/assets/index.html. At some point of time we will extend
vendor.config.coffee to deal with CSS files (vendor.css and CDN
serving), but that on as needed basis.</p>
<p>It should also be noted that, karma will use vendor.config.coffee to
build the test environment so all your tests will include the same 3rd
party libraries that is used in development and production.</p>
<p>Generally all files referenced will be processed in the same order they
appear int vendor.config.coffee, and some libraries need special care in
ordering, like angular before angular-route.</p>
<p>vendor.config.coffee contains 2 sections as follow:</p>
<div class="section" id="cdn-section">
<h5>CDN Section<a class="headerlink" href="#cdn-section" title="Permalink to this headline">¶</a></h5>
<p>This is for 3rd party JS that should be served from CDN on production.
It is a list of objects, each containing:</p>
<ul class="simple">
<li><strong>external</strong>: The CDN url of the library, minified as it should be
served in production. This form is used using grunt build. You should
use <a class="reference external" href="https://">https://</a> to serve 3rd parties <strong>and refrain from using any CDN
for any library that is not served over CDN to avoid and script
injection attacks</strong></li>
<li><strong>notmin</strong>: The CDN url of the library, nonminified, used create
special builds for debugging purposes using grunt server:usecdn</li>
<li><strong>local</strong>: The local path the library like
&#8216;bower_components/lib/somehting.js&#8217;, this will be used generally in
development using grunt server, also it will be used by karma to
construct the test environment.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>When adding a file in vendor.config.coffee watch out for coffee script indentations it should be as follows and notice the indentation of external key after the comma:</p>
<div class="last highlight-python"><pre>``coffee-script     ,       external:         "https://cdn/lib/lib.min.js"       notmin:         "https://cdn/lib/lib.js"       local:         "bower_components/lib/lib.js"``</pre>
</div>
</div>
</div>
<div class="section" id="bundled-section">
<h5>Bundled Section<a class="headerlink" href="#bundled-section" title="Permalink to this headline">¶</a></h5>
<p>If you don&#8217;t wish to serve 3rd party library over CDN, like in case
there is not HTTPS CDN for the library, or it is not being served over
CDN, etc. You put the bower path of the library in the bundled section.
These files will concat and uglified in production in a file called
vendor.js.</p>
</div>
</div>
</div>
</div>
<div class="section" id="macos-bootstrap">
<h2>MacOS bootstrap<a class="headerlink" href="#macos-bootstrap" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id2">
<h3>Installation strategy<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>The following section describes the installation of cloudml-ui on MacOS.</p>
</div>
<div class="section" id="id3">
<h3>Backend<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>Create virtual env:</p>
<div class="highlight-python"><pre>$ virtualenv --no-site-packages ve
$ . ve/bin/activate</pre>
</div>
<p>Install numpy and scipy:</p>
<div class="highlight-python"><pre>$ export LAPACK=/usr/lib/liblapack.so
$ export ATLAS=/usr/lib/libatlas.so
$ export BLAS=/usr/lib/libblas.so
$ pip install numpy==1.7.1
$ pip install scipy==0.12.0</pre>
</div>
<p>Install python requirements:</p>
<div class="highlight-python"><pre>$ pip install -r ./requirements.txt</pre>
</div>
<p>Downgrade psycopg2 (if not already set to this version):</p>
<div class="highlight-python"><pre>$ pip install -U psycopg2==2.4.6</pre>
</div>
<p>Create local config:</p>
<div class="highlight-python"><pre>$ cp api/local_config.py.tpl api/local_config.py</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Create OATH API keys using <a class="reference external" href="https://www.odesk.com/services/api/apply">https://www.odesk.com/services/api/apply</a>. Callback URL is <a class="reference external" href="http://127.0.0.1:3333/#/auth/callback">http://127.0.0.1:3333/#/auth/callback</a></p>
</div>
<p>Install rabbit mq:</p>
<div class="highlight-python"><pre>$ brew install rabbitmq</pre>
</div>
<p>Start rabbit mq:</p>
<div class="highlight-python"><pre>$ rabbitmq-server -detached</pre>
</div>
<p>Configure rabbitmq(celery broker):</p>
<div class="highlight-python"><pre>$ rabbitmqctl add_user cloudml {{password}}
$ rabbitmqctl add_vhost cloudml
$ rabbitmqctl set_permissions cloudml cloudml ".*" ".*" ".*"</pre>
</div>
<p>Download dynamodb and install it. Configure it as follows:</p>
<div class="highlight-python"><pre>$ edit cloudml-ui/api/logs/dynamodb/dynamodb_local.sh
$ set  -Djava.library.path to your installation's DynamoDBLocal_lib directory
$ set -jar to your installation's DynamoDBLocal.jar</pre>
</div>
<p>Start local dynamodb:</p>
<div class="highlight-python"><pre>$ cloudml-ui/api/logs/dynamodb/dynamodb_local.sh &amp;</pre>
</div>
<p>Install postgres:</p>
<div class="highlight-python"><pre>$ brew install postgresql</pre>
</div>
<p>Start postgres:</p>
<div class="highlight-python"><pre>$ pg_ctl -D /usr/local/var/postgres -l</pre>
</div>
<p>Create database, users and roles in postgres:</p>
<div class="highlight-python"><pre>$ psql -d template1
psql (9.4.4)
Type "help" for help.

template1=# create user cloudml with password 'cloudml';
CREATE ROLE
template1=# create database cloudml;
CREATE DATABASE
template1=# grant all privileges on database cloudml to cloudml;
GRANT
template1=# \q</pre>
</div>
<p>Tornado:</p>
<div class="highlight-python"><pre>$ pip uninstall tornado (4.x) because of missing import in celery, tornado.auth.GoogleMixin from celery.
$ pip install tornado==2.3</pre>
</div>
<p>Celery:</p>
<div class="highlight-python"><pre>$ pip install celery
$ pip show -f celery
---
Metadata-Version: 2.0
Name: celery
Version: 3.1.18
Summary: Distributed Task Queue
Home-page: http://celeryproject.org
Author: Ask Solem
Author-email: ask@celeryproject.org
License: BSD
Location: /opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages
Requires: pytz, billiard, kombu
Files:
  ../../../bin/celery
  ../../../bin/celerybeat
  ../../../bin/celeryd
  ../../../bin/celeryd-multi
$ So set your path to  /opt/local/Library/Frameworks/Python.framework/Versions/2.7/bin/
$ which celery
/opt/local/Library/Frameworks/Python.framework/Versions/2.7/bin/celery</pre>
</div>
<p>Start all cloudml-ui backend servers. These have to be started from inside the cloduml-ui directory</p>
<div class="highlight-python"><pre>$ python manage.py runserver
$ python manage.py celeryd
(Dont run the first two above in backend. Open a seperate console tab/window and run them.)
$ Dyanmodb (./api/logs/dynamodb/dynamodb_local.sh &amp;)
$ rabbitmq (rabbitmq-server -detached ) (Detached runs in background.)</pre>
</div>
<div class="section" id="front-end-installation-for-cloudml-ui">
<h4>Front-end installation for Cloudml-ui<a class="headerlink" href="#front-end-installation-for-cloudml-ui" title="Permalink to this headline">¶</a></h4>
<p>Install the following modules as follows:</p>
<div class="highlight-python"><pre>cloudml-ui $ brew install nodejs
cloudml-ui $ brew install npm
cloudml-ui $ sudo npm install grunt-cli -g
$ npm install -g bower

Just run bower install under cloudml-ui/ui directory. There is a bower.json there.
Chose the lower version of angular js or something like this !1 while doing bower install.
Unable to find a suitable version for angular, please choose one:
  1) angular#1.2.19 which resolved to 1.2.19 and is required by angular-mocks#1.2.19
  2) angular#1.2.20 which resolved to 1.2.20 and is required by angular-cookies#1.2.20, angular-mocks#1.2.20, angular-resource#1.2.20, angular-route#1.2.20, angular-sanitize#1.2.20, cloudml-ui-frontend
Unable to find a suitable version for codemirror, please choose one:
  1) codemirror#4.3 which resolved to 4.3.0 and is required by angular-ui-codemirror#0.1.7
  2) codemirror#4.5.0 which resolved to 4.5.0 and is required by cloudml-ui-frontend

Prefix the choice with ! to persist it to bower.json

? Answer: !1</pre>
</div>
<p>Global modules installation &#8211;&gt;
Make sure the following are installed:</p>
<div class="highlight-python"><pre>$ sudo npm install -g bower@1.3.9
$ sudo npm install -g coffee-script@1.8.0
$ sudo npm install -g grunt-cli@0.1.13</pre>
</div>
<p>Change directory to your local cloudml-ui/ui directory and do the following:</p>
<div class="highlight-python"><pre>$ rm -r node_modules bower_components
$ npm cache clean
$ npm install
$ bower cache clean
$ bower install</pre>
</div>
<p>Building x-editable:</p>
<div class="highlight-python"><pre>version 1.4.4 of x-editable doesn't yet come with pre-build redistributable so you have to build it yourself.

Change directory to your local cloudml-ui/ui directory and do the following:

cd bower_components/x-editable

npm install

grunt build

Ignore this initial error
Loading "test.js" tasks and helpers...ERROR
&gt;&gt; Error: No such module: evals

In the end grunt build command should output,
Done, without errors.

Now you have bower_components/x-editable/dist directory to serve x-editable locally, note that x-editable on production is served through CDN.</pre>
</div>
<p>Run npm install under ui directory as well:</p>
<div class="highlight-python"><pre>cd ui

npm install

Ignore these errors:
make: *** [Release/obj.target/fse/fsevents.o] Error 1
gyp ERR! build error
gyp ERR! stack Error: `make` failed with exit code: 2
gyp ERR! stack    at ChildProcess.onExit (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/build.js:269:23)

As long as you get these installation messages like this, this step has run fine:
karma@0.12.37 node_modules/karma
├── di@0.0.1
├── graceful-fs@3.0.8
├── mime@1.3.4
├── colors@1.1.2</pre>
</div>
<p>Updating Webdrive:</p>
<div class="highlight-python"><pre>Change directory to your local cloudml-ui/ui directory

Update webdrive to install chrome driver and selenium standalone server

./node_modules/protractor/bin/webdriver-manager update

in case webdrive updates fails for any reason, do the follwoing are retry the update

rm -r ./node_modules/protractor/selenium</pre>
</div>
<p>Grunt Key Tasks and Testing your installation:</p>
<div class="highlight-python"><pre>Change directory to your local cloudml-ui/ui directory

grunt --help

This will display grunt available tasks, generally use this when needed.

Unit Tests (grunt unit)

grunt unit

This should launch a browser/chrome and run the unit tests. It should all pass :), when done do CTRL+C</pre>
</div>
<p>Start front-end server:</p>
<div class="highlight-python"><pre>$ grunt server
(Dont run the above in backend. Open a seperate tab/window and run it since you would want to see the messages on the console.)</pre>
</div>
<p>In case you get the following error, do the following:</p>
<div class="highlight-python"><pre>SSLError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:59

So we looked at this
http://stackoverflow.com/questions/28115250/boto-ssl-certificate-verify-failed-certificate-verify-failed-while-connecting

And resolved it this way.
In  cloudml-ui/api/amazon_utils/__init__.py, class AmazonS3Helper, def __init__ method,in the last line,
we passed one additional parameter, is_secure=False to
boto.connect_s3 method, as shown below:
 67 class AmazonS3Helper(object):
 68     def __init__(self, token=None, secret=None, bucket_name=None):
 69         token = token or app.config['AMAZON_ACCESS_TOKEN']
 70         secret = secret or app.config['AMAZON_TOKEN_SECRET']
 71         self.bucket_name = bucket_name or app.config['AMAZON_BUCKET_NAME']
 72         self.conn = boto.connect_s3(token, secret,is_secure=False)</pre>
</div>
</div>
</div>
</div>
<div class="section" id="vagrant">
<h2>Vagrant<a class="headerlink" href="#vagrant" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="installing-test-data">
<h2>Installing test data<a class="headerlink" href="#installing-test-data" title="Permalink to this headline">¶</a></h2>
<p>Please download archive with test dataset <a class="reference download internal" href="_downloads/dump.tar.gz"><tt class="xref download docutils literal"><span class="pre">dump.tar.gz</span></tt></a> and decompress it:</p>
<div class="highlight-python"><pre>$ tar -zxvf dump.tar.gz</pre>
</div>
<p>Run postgres client:</p>
<div class="highlight-python"><pre>$ psql -s cloudml</pre>
</div>
<p>Create db table:</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">ja_quick_info</span> <span class="p">(</span>
<span class="n">application</span> <span class="nb">bigint</span><span class="p">,</span>
<span class="n">opening</span> <span class="nb">bigint</span><span class="p">,</span>
<span class="n">employer_info</span> <span class="nb">text</span><span class="p">,</span>
<span class="n">agency_info</span> <span class="nb">text</span><span class="p">,</span>
<span class="n">contractor_info</span> <span class="nb">text</span><span class="p">,</span>
<span class="n">file_provenance</span> <span class="nb">character</span> <span class="nb">varying</span><span class="p">(</span><span class="mi">256</span><span class="p">),</span>
<span class="n">file_provenance_date</span> <span class="nb">date</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Fill data from dump.csv:</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">COPY</span> <span class="n">ja_quick_info</span> <span class="k">FROM</span> <span class="s1">&#39;path_to_dump/dump.csv&#39;</span> <span class="n">CSV</span> <span class="n">HEADER</span><span class="p">;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The above dump file is found in cloudml-ui directory. Better to put this dump file into a folder with no spaces in its path name. Hence I created /doc and put the dump file there. Otherwise it was not working.</p>
<p>Grant all permissions to table ja_quick_info for user cloudml:</p>
<div class="last highlight-python"><pre>cloudml=# grant all privileges on table ja_quick_info  to cloudml;</pre>
</div>
</div>
<p>Now login as cloudml user and check. The below select should work:</p>
<div class="highlight-python"><pre>$ psql -s cloudml -U cloudml
psql (9.4.4)
Type "help" for help.

cloudml=&gt; select * from ja_quick_info limit 1;
***(Single step mode: verify command)*******************************************
select * from ja_quick_info limit 1;
***(press return to proceed or enter x and return to cancel)********************

cloudml=&gt; \q</pre>
</div>
<p>The above select statement should NOT give a permission-denied message like this:</p>
<div class="highlight-python"><pre>$ psql -s cloudml -U cloudml
psql (9.4.4)
Type "help" for help.

cloudml=&gt; select * from ja_quick_info limit 1;
***(Single step mode: verify command)*******************************************
select * from ja_quick_info limit 1;
***(press return to proceed or enter x and return to cancel)********************

ERROR:  permission denied for relation ja_quick_info
cloudml=&gt; \q</pre>
</div>
</div>
</div>


          </div>
        </div>
      </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer">
        &copy; 2013, oDesk.
      <a href="_sources/developers_guide.txt" rel="nofollow">Show this page source</a>
    </div>
     <div class="rel rellarge">
    
    <div class="buttonPrevious">
      <a href="deployment.html">Previous
      </a>
    </div>
    <div class="buttonNext">
      <a href="settings.html">Next
      </a>
    </div>
    
     </div>

    
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-22606712-2']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    

    <script src="http://www.google.com/jsapi" type="text/javascript"></script>
    <script type="text/javascript"> google.load('search', '1',
        {language : 'en'}); google.setOnLoadCallback(function() {
            var customSearchControl = new
            google.search.CustomSearchControl('016639176250731907682:tjtqbvtvij0');
            customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
            var options = new google.search.DrawOptions();
            options.setAutoComplete(true);
            customSearchControl.draw('cse', options); }, true);
    </script>
  </body>
</html>